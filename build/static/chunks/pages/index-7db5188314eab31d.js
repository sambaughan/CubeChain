(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(39270)}])},39270:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var r=t(34051),a=t.n(r),c=t(85893),u=(t(9008),t(25675),t(214)),o=t.n(u),s=t(67294),i=t(35553),f=t(14279);function p(e,n,t,r,a,c,u){try{var o=e[c](u),s=o.value}catch(i){return void t(i)}o.done?n(s):Promise.resolve(s).then(r,a)}function h(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var c=e.apply(n,t);function u(e){p(c,r,a,u,o,"next",e)}function o(e){p(c,r,a,u,o,"throw",e)}u(void 0)}))}}var l=t(9669).default,d="0x4F0be2B25d159CCB3173316A31c8680B8147cBb1",v=t(3283);new v(v.givenProvider||"https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161");function x(){var e=(0,s.useState)(""),n=e[0],t=e[1],r=(0,s.useState)(0),u=r[0],p=r[1],v=(0,s.useState)(0),x=v[0],m=v[1],w=(0,s.useState)(0),b=w[0],k=w[1],g=(0,s.useState)(""),y=g[0],_=g[1],j=(0,s.useState)(0),C=j[0],E=j[1],F=(0,s.useState)("$ETH"),N=F[0],T=(F[1],function(){var e=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd").then((function(e){var n=e.data.ethereum.usd;console.log(n.toFixed(0)),p(e.data.ethereum.usd)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,s.useEffect)((function(){n&&(P(n),T(),$())}),[n]),(0,s.useEffect)((function(){}),[N]);var A=function(){var e=h(a().mark((function e(){var r,c,u,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=window.ethereum,e.next=4,r.request({method:"eth_chainId"});case 4:if(c=e.sent,console.log("Connected to chain "+c),u="0x1",r){e.next=12;break}return alert("Get MetaMask!"),e.abrupt("return");case 12:if(c===u){e.next=15;break}return alert("You are not connected to the main network!"),e.abrupt("return");case 15:return e.next=17,r.request({method:"eth_requestAccounts"});case 17:return o=e.sent,console.log("Connected",o[0]),t(o[0]),E(c),e.next=23,P(n);case 23:return e.next=25,T();case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),console.log(e.t0);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=h(a().mark((function e(n){var t,r,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new f.r("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),e.next=3,t.getBalance("".concat(n.toString()),"latest");case 3:r=e.sent,c=Number(i.dF(r)),m(c);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=h(a().mark((function e(){var n,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new f.r("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),e.next=3,n.getBalance(d,"latest");case 3:t=e.sent,r=Number(i.dF(t)),k(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=h(a().mark((function e(n,t,r,c){var u,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=window.ethereum){e.next=6;break}return console.log("no ethereum found"),e.abrupt("return");case 6:if("$ETH"!==c){e.next=21;break}return e.prev=7,n.preventDefault(),o={nonce:"0x00",to:d,from:t,value:i.fi(r)._hex,chainId:C},e.next=12,u.request({method:"eth_sendTransaction",params:[o]});case 12:s=e.sent,console.log(s),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0);case 19:e.next=29;break;case 21:return e.prev=21,e.abrupt("return");case 26:e.prev=26,e.t1=e.catch(21),console.log(e.t1);case 29:case"end":return e.stop()}}),e,null,[[7,16],[21,26]])})));return function(n,t,r,a){return e.apply(this,arguments)}}();return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:o().App,children:[(0,c.jsx)("h1",{children:"This is your Crypto payment gateway"}),(0,c.jsx)("div",{className:o().App,children:n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h3",{children:["The balance of the treasury is"," "+b.toFixed(5),". It is worth $",(b*u).toFixed(2)]}),(0,c.jsxs)("p",{children:[" Current Eth Market Price is $",u," "]}),(0,c.jsxs)("p",{children:["Connected with : ",n]}),(0,c.jsxs)("p",{children:["In your balance you currently have"," ",x.toFixed(5)+" ","$ETH which is equal to $",(x*u).toFixed(2)]}),(0,c.jsxs)("form",{onChange:function(e){return _(e.target.value)},children:[(0,c.jsxs)("p",{children:["Enter the value in ",N||"$ETH"," ","you want to send"]}),(0,c.jsx)("input",{type:"text",placeholder:"Amount to pay..."}),(0,c.jsx)("button",{type:"submit",className:"cta-pay",onClick:function(e){return B(e,n,y,N)},children:"PAY"})]}),(0,c.jsx)("button",{onClick:S,children:"Disconnect"})]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("button",{onClick:A,children:"Connect"})})})]})})}},214:function(e){e.exports={App:"Home_App__2g2bl"}},46601:function(){},89214:function(){},71922:function(){},2363:function(){},27790:function(){},52361:function(){},94616:function(){},6567:function(){}},function(e){e.O(0,[482,714,943,774,888,179],(function(){return n=78581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);